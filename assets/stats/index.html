<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stats</title>
</head>

<body>

<p>
  Incoming connections: <span id="websocket_server_connections"></span>
</p>

<p>
  Outgoing connections: <span id="websocket_client_connections"></span>
</p>

<p>
  Graph nodes: <span id="graph_node_count"></span>
</p>

</body>

<script src="/stats/gun.js"></script>
<script>
gun = window.gun = GUN(document.location.origin + '/gun');

gun.get('node_stats').get('websocket_server_connections').on((data, key) => {
  console.log(key, data);
  document.getElementById('websocket_server_connections').innerText = data;
});

gun.get('node_stats').get('websocket_client_connections').on((data, key) => {
  console.log(key, data);
  document.getElementById('websocket_client_connections').innerText = data;
});

gun.get('node_stats').get('graph_node_count').on((data, key) => {
  console.log(key, data);
  document.getElementById('graph_node_count').innerText = data;
});
</script>

</html>